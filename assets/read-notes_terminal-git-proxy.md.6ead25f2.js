import{_ as s,o as a,c as l,V as n}from"./chunks/framework.e0e258e1.js";const D=JSON.parse('{"title":"PowerShell 命令行 和 git 代理配置-windows 篇","description":"","frontmatter":{},"headers":[],"relativePath":"read-notes/terminal-git-proxy.md","filePath":"read-notes/terminal-git-proxy.md"}'),o={name:"read-notes/terminal-git-proxy.md"},e=n(`<h1 id="powershell-命令行-和-git-代理配置-windows-篇" tabindex="-1">PowerShell 命令行 和 git 代理配置-windows 篇 <a class="header-anchor" href="#powershell-命令行-和-git-代理配置-windows-篇" aria-label="Permalink to &quot;PowerShell 命令行 和 git 代理配置-windows 篇&quot;">​</a></h1><p>最近使用 powershell clone 仓库，速度贼慢，研究了一下如何提速：</p><h2 id="梯子准备" tabindex="-1">梯子准备 <a class="header-anchor" href="#梯子准备" aria-label="Permalink to &quot;梯子准备&quot;">​</a></h2><p>如下，你的楼梯本地代理地址：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">socks5:http://127.0.0.1:51837</span></span></code></pre></div><h2 id="powershell-命令行代理" tabindex="-1">powershell 命令行代理 <a class="header-anchor" href="#powershell-命令行代理" aria-label="Permalink to &quot;powershell 命令行代理&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">说明</p><p>配置 terminal 命令可能导致你在使用 <code>yarn | npm</code> 安装依赖的时候报错，请谨慎使用；</p></div><div class="language-ps1"><button title="Copy Code" class="copy"></button><span class="lang">ps1</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">env:http_proxy</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.0.0.1:51837</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">env:https_proxy</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.0.0.1:51837</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><p>测试：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-I</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">www.google.com</span></span></code></pre></div><p>收到响应，则表示代理成功；</p><p>如图：</p><p><img src="https://github.com/Jsmond2016/blog/assets/25282180/4ecf3637-65c2-4fe9-89c0-4976797e19fd" alt="image"></p><p>取消设置：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">$env:http_proxy=</span><span style="color:#89DDFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">$env:https_proxy=</span><span style="color:#89DDFF;">&quot;&quot;</span></span></code></pre></div><p>其他关于 PowerShell 的 <code>env</code> 相关操作</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># $env:ENV_NAME</span></span>
<span class="line"><span style="color:#A6ACCD;">$env:http_proxy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> http://127.0.0.1:51837</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">dir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">env:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">..</span><span style="color:#A6ACCD;">.展示所有环境变量</span></span></code></pre></div><p>更多，参考：</p><ul><li><a href="https://www.tutorialspoint.com/how-to-set-environment-variables-using-powershell" target="_blank" rel="noreferrer">https://www.tutorialspoint.com/how-to-set-environment-variables-using-powershell</a></li><li><a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_environment_variables?view=powershell-7.3" target="_blank" rel="noreferrer">https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_environment_variables?view=powershell-7.3</a></li></ul><h2 id="git-命令代理" tabindex="-1">Git 命令代理 <a class="header-anchor" href="#git-命令代理" aria-label="Permalink to &quot;Git 命令代理&quot;">​</a></h2><p>主要分 2 种：http 代理和 ssh 代理</p><ul><li>http 代理</li></ul><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--global</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https.proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://127.0.0.1:51837</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--global</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https.proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://127.0.0.1:51837</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 上下 2 个配置 二选一，试一试，应该有一个有效果</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--global</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http.proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">socks5://127.0.0.1:51837</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--global</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https.proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">socks5://127.0.0.1:51837</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><p>测试：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/vuejs/vue.git</span></span></code></pre></div><p>效果：</p><p><img src="https://github.com/Jsmond2016/blog/assets/25282180/7d287254-2134-421c-ac17-9cc625cfba4b" alt="image"></p><p>后续不需要，可取消代理：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--global</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--unset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http.proxy</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--global</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--unset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https.proxy</span></span></code></pre></div><ul><li>ssh 代理</li></ul><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ProxyCommand</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">connect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-S</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://127.0.0.1:51837</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">%h</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">%p</span></span></code></pre></div><p>测试：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">git@github.com:vuejs/vue.git</span></span></code></pre></div><p>效果图：</p><p><img src="https://github.com/Jsmond2016/blog/assets/25282180/1012af44-d94b-4e58-b62a-f0e63803945d" alt="image"></p><h2 id="遇到问题" tabindex="-1">遇到问题 <a class="header-anchor" href="#遇到问题" aria-label="Permalink to &quot;遇到问题&quot;">​</a></h2><p>上述操作都成功了，我使用 <code>yarn</code> 给项目安装依赖的时候，报网络问题，不知为何，尝试禁用 PowerShell 的代理后恢复；</p><p>参考资料：</p><ul><li><a href="https://gist.github.com/dreamlu/cf7cbc0b8329ac145fa44342d6a1c01d" target="_blank" rel="noreferrer">win-ss</a></li><li><a href="https://stackoverflow.com/questions/5103083/ssh-in-git-behind-proxy-on-windows-7" target="_blank" rel="noreferrer">SSH in git behind proxy on windows 7</a></li><li><a href="https://juejin.cn/post/7130206938919927838" target="_blank" rel="noreferrer">给windows终端设置代理</a></li><li><a href="https://blog.devhitao.com/2018/08/23/mac-terminal-proxy" target="_blank" rel="noreferrer">让终端命令请求走 Charles 或 SS 代理的方法</a></li><li><a href="https://www.jianshu.com/p/b9047a59ffc9" target="_blank" rel="noreferrer">Windows git和cmd代理设置</a></li><li><a href="https://zhuanlan.zhihu.com/p/620877553" target="_blank" rel="noreferrer">Proxy CONNECT aborted--解决办法</a></li></ul>`,39),p=[e];function t(r,c,i,C,h,y){return a(),l("div",null,p)}const g=s(o,[["render",t]]);export{D as __pageData,g as default};
