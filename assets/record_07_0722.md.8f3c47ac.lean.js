import{o as n,c as a,b as t,d as s}from"./app.7de1e138.js";const e='{"title":"0722","description":"","frontmatter":{},"headers":[{"level":2,"title":"工作","slug":"工作"},{"level":2,"title":"任务","slug":"任务"},{"level":2,"title":"好文推荐","slug":"好文推荐"},{"level":2,"title":"好用的工具","slug":"好用的工具"},{"level":2,"title":"TODOS","slug":"todos"}],"relativePath":"record/07/0722.md","lastUpdated":1628174241578}',o={},l=t("h1",{id:"_0722"},[t("a",{class:"header-anchor",href:"#_0722","aria-hidden":"true"},"#"),s(" 0722")],-1),c=t("p",null,[t("img",{src:"/study-everyday/assets/0722.b12c6d30.jpg",alt:""})],-1),p=t("h2",{id:"工作"},[t("a",{class:"header-anchor",href:"#工作","aria-hidden":"true"},"#"),s(" 工作")],-1),u=t("p",null,[t("strong",null,"onChange 的坑！！")],-1),r=t("ul",null,[t("li",null,[t("a",{href:"https://ant.design/components/tabs-cn/#header",target:"_blank",rel:"noopener noreferrer"},"AntD 中 Tab"),s(" 组件使用问题：遇到一个奇怪的 bug：删除 某个 tab 的时候，对应的 activeKey 需要手动改变到当前 tabList 的最后一个 tab 上，但是不管是使用 useState 还是使用 model 层，都会报错，获取到的 activeKey 是错的。")]),t("li",null,"一开始以为是 useState 的问题，打 log 发现，删除操作的时候 model 改变了 2 次，第一次是改变是改变 tabList 和 activeKey，删除操作和改变当前的 activeKey，传的数据正确。第二次改变的时候，activeKey 是旧的，又把 activeKey 改变了回来。但是旧的 activeKey 被删除了找不到了，自然就报错了。"),t("li",null,[s("最后，发现真相是在 "),t("code",null,"onChange"),s(" 上：原本以为 onChange 事件只会在鼠标点击切换 tab 的时候会触发。没想到只要 tab 切换了，不论 任何方式，都会触发。")]),t("li",null,[s("所以，使用的时候，尽量使用 "),t("code",null,"onClick"),s(" 事件避免不必要的问题。")])],-1),i=t("p",null,[t("strong",null,"dvajs"),s(" 在 effects 中获取 state：")],-1),k=t("p",null,"通常，如果是同步操作的 reducer ，获取 state 的方式为：",-1),d=t("div",{class:"language-js"},[t("pre",null,[t("code",null,[s("reducers"),t("span",{class:"token operator"},":"),s(),t("span",{class:"token punctuation"},"{"),s("\n    "),t("span",{class:"token function"},"updateState"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[s("state"),t("span",{class:"token punctuation"},","),s(),t("span",{class:"token punctuation"},"{"),s(" payload "),t("span",{class:"token punctuation"},"}")]),t("span",{class:"token punctuation"},")"),s(),t("span",{class:"token punctuation"},"{"),s("\n      "),t("span",{class:"token keyword"},"return"),s(),t("span",{class:"token punctuation"},"{"),s("\n        "),t("span",{class:"token operator"},"..."),s("state"),t("span",{class:"token punctuation"},","),s("\n        "),t("span",{class:"token operator"},"..."),s("payload"),t("span",{class:"token punctuation"},","),s("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),s("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),s("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),s("\n")])])],-1),h=t("p",null,[s("但是，如果在 effects 呢？需要使用 "),t("code",null,"select"),s(" 获取")],-1),f=t("div",{class:"language-js"},[t("pre",null,[t("code",null,[s("\neffects"),t("span",{class:"token operator"},":"),s(),t("span",{class:"token punctuation"},"{"),s("\n  "),t("span",{class:"token operator"},"*"),t("span",{class:"token function"},"updateMasterInfo"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[t("span",{class:"token punctuation"},"{"),s(" payload "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),s(),t("span",{class:"token punctuation"},"{"),s(" call"),t("span",{class:"token punctuation"},","),s(" put"),t("span",{class:"token punctuation"},","),s(" select "),t("span",{class:"token punctuation"},"}")]),t("span",{class:"token punctuation"},")"),s(),t("span",{class:"token punctuation"},"{"),s("\n    "),t("span",{class:"token keyword"},"const"),s(" masterInfo "),t("span",{class:"token operator"},"="),s(),t("span",{class:"token keyword"},"yield"),s(),t("span",{class:"token function"},"select"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[s("s"),t("span",{class:"token operator"},":"),s(" OptionsConfigState")]),t("span",{class:"token punctuation"},")"),s(),t("span",{class:"token operator"},"=>"),s(" s"),t("span",{class:"token punctuation"},"."),s("masterInfo"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),s("\n  "),t("span",{class:"token punctuation"},"}"),s("\n"),t("span",{class:"token punctuation"},"}"),s("\n\nreducers"),t("span",{class:"token operator"},":"),s(),t("span",{class:"token punctuation"},"{"),s("\n    "),t("span",{class:"token function"},"updateState"),t("span",{class:"token punctuation"},"("),t("span",{class:"token parameter"},[s("state"),t("span",{class:"token punctuation"},","),s(),t("span",{class:"token punctuation"},"{"),s(" payload "),t("span",{class:"token punctuation"},"}")]),t("span",{class:"token punctuation"},")"),s(),t("span",{class:"token punctuation"},"{"),s("\n      "),t("span",{class:"token keyword"},"return"),s(),t("span",{class:"token punctuation"},"{"),s("\n        "),t("span",{class:"token operator"},"..."),s("state"),t("span",{class:"token punctuation"},","),s("\n        "),t("span",{class:"token operator"},"..."),s("payload"),t("span",{class:"token punctuation"},","),s("\n      "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},";"),s("\n    "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),s("\n  "),t("span",{class:"token punctuation"},"}"),t("span",{class:"token punctuation"},","),s("\n")])])],-1),g=t("p",null,"相关资料：",-1),m=t("ul",null,[t("li",null,[t("a",{href:"https://dvajs.com/guide/introduce-class.html#effect",target:"_blank",rel:"noopener noreferrer"},"dvajs-Effect"),s(" 官网没看到 select 的使用介绍。")]),t("li",null,[t("a",{href:"https://blog.csdn.net/weixin_40792878/article/details/82051078",target:"_blank",rel:"noopener noreferrer"},"dva学习---effects异步中通过select获取当前的state")])],-1),v=t("h2",{id:"任务"},[t("a",{class:"header-anchor",href:"#任务","aria-hidden":"true"},"#"),s(" 任务")],-1),b=t("h2",{id:"好文推荐"},[t("a",{class:"header-anchor",href:"#好文推荐","aria-hidden":"true"},"#"),s(" 好文推荐")],-1),y=t("ul",null,[t("li",null,[t("a",{href:"https://mp.weixin.qq.com/s/92SLJQsX7Mpif_sEcr3PQA",target:"_blank",rel:"noopener noreferrer"},"万字干货！详解JavaScript执行过程")])],-1),_=t("h2",{id:"好用的工具"},[t("a",{class:"header-anchor",href:"#好用的工具","aria-hidden":"true"},"#"),s(" 好用的工具")],-1),S=t("h2",{id:"todos"},[t("a",{class:"header-anchor",href:"#todos","aria-hidden":"true"},"#"),s(" TODOS")],-1),j=t("ul",null,[t("li",null,[t("a",{href:"https://zhuanlan.zhihu.com/p/92832843",target:"_blank",rel:"noopener noreferrer"},"React16 源码解析(一)- 图解 Fiber 架构"),s(" React 源码系列，值得一看")]),t("li",null,[t("a",{href:"https://github.com/Jsmond2016/react-router-dom-nut",target:"_blank",rel:"noopener noreferrer"},"react-router 原理实现"),s(" 有时间将这个文章梳理一下，每一个细节的实现要记住。")])],-1);o.render=function(t,s,e,o,K,w){return n(),a("div",null,[l,c,p,u,r,i,k,d,h,f,g,m,v,b,y,_,S,j])};export default o;export{e as __pageData};
