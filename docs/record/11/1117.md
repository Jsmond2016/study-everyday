
# 1117

![](./bg-imgs/1117.jpg)

## 工作

- 新需求，正常开发
- **问题1：** 项目无法启动，报错 etcd 相关问题

排查方式：

```
etcd 问题排查经过记录：

1-找到 etcd.url 报错的那一行
2-查看代码，取 url 有 2 种 方式： 默认设定（错误），环境变量 process.env.etcdUrl
3- 删除 env 的 etcdUrl ，重启 命令行，重新运行，搞定

```

这里有个问题，url 是从 环境变量 env 中拿到的，在 *inux 系统的命令行中国，直接输入 `env` 是可以直接显示环境变量的，但是在 windows 中是不行的；

**那么，windows 如何查看 `env` 环境变量呢？**

方法1： 既然是环境变量，那么 右键 【我的电脑】——【属性】——【高级系统变量设置】——环境变量，可以看到 【系统环境变量】和 【用户环境变量】，此时通过 关键词就能看到，我的 ETCD_URL 在 【用户环境变量】这里已经配置了旧的错误地址，删除即可；

方法2： 命令行进入 `cmd` 输入 `node` ，进入 `node` 环境模式，输入 `process.env` 即可看到环境变量；为什么要输入 `process` ？ 因为看到代码里面是从 `process.env.ETCD_URL` 这样取值的。

方法3： 进入 windows 的 wsl ubuntu 子系统中，命令行内直接输入 `env` 即可看到


- **问题2：** 输入端含有 特殊字符，Go 服务报错；

上一个需求上线，测试发现一个问题，有个活动名字为 `活动名称 <img src='xxx' />` ，然后在搜索框内输入 上面同名的活动名，搜索不出结果；但是 前端 接口和bff 没有报错信息；排查问题发现，在后端 ORM 中生成的 sql，对于上述特殊字符没有进行特殊处理，直接存入数据库；

实际上，上述活动名称 `活动名称 <img src='xxx' />`，这里实际上是存在 XSS 攻击风险 / sql 注入的风险的；这是一个隐患，感觉得提早提出这个问题，在所有输入端，要考虑过滤特殊字符问题；

## 反思

## 任务


## 今日算法

今日学习：


今日复习：


## 温故知新
> 防抖节流等各种手写，http和网络，浏览器原理，性能优化，Webpack


## 好文推荐
> 有感好文

- [实战篇 - 如何实现和淘宝移动端一样的模块化加载 （task-silce）](https://juejin.cn/post/6844903894301016078)
- [双缓存](https://juejin.cn/post/7022933131694964744)


## 项目推荐
> 值得学习的项目


## 面经相关
> 八股文相关

## 明日计划


## TODOS